<p-toast></p-toast>
  <h5 class="mt-3">Solicitud de Auxilio</h5>
  <div class="alert alert-warning" role="alert" *ngIf="displayMessageNatPerson">
    <strong>{{ displayMessageNatPerson }}</strong>. De no hacerlo, no podrá completar la solicitud de auxilio, ya que esta información es fundamental para el estudio de su solicitud.
  </div>
  
  <div class="card mb-5">
    <div class="card-body">
      <form class="row g-3" [formGroup]="allowanceForm" (ngSubmit)="onSubmit()" [attr.disabled]="isAdditionalDisabled ? true : null">
        <div class="col-md-12">
          <label for="idTipoAuxilio" class="form-label"
            >Auxilios Disponibles</label
          >
          <select
            class="form-select"
            formControlName="idTipoAuxilio"
          >
            <option *ngFor="let type of allowanceTypes" [value]="type.id">
              {{ type.nombre }}
            </option>
          </select>
        </div>
        <div class="col-md-12">
          <label for="descripcion" class="form-label">Descripción de la solicitud</label>
          <div class="col-md-12">
            <div class="form-floating">
              <textarea class="form-control" placeholder="descripcion" formControlName="descripcion" id="descripcion" style="height: 150px"></textarea>
              <label for="descripcion">Escriba la descripción del por qué requiere el auxilio</label>
            </div>
          </div>
        </div>


        <div class="col-md-12">
          <label for="pdfFile" class="form-label">Subir copia de documento de identidad en archivo PDF</label>
          <input type="file" (change)="onFileChange($event)" class="form-control" accept="application/pdf" />
          <div *ngIf="allowanceForm.controls['rutaDocumento'].invalid && allowanceForm.controls['rutaDocumento'].touched">
            <small class="text-danger">La copia de documento de identidad es obligatoria</small>
          </div>
        </div>
        <div class="col-12">
          <button
            type="submit"
            class="btn btn-success"
            [disabled]="allowanceForm.invalid || isAdditionalDisabled || isSubmitting"
          >
            <span *ngIf="!isSubmitting">Enviar Solicitud</span>
            <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            <span *ngIf="isSubmitting"> Enviando...</span>
          </button>
        </div>
      </form>
    </div>
  </div>

